package net.anei.cadpage.parsers.NY;

import java.util.Properties;

import net.anei.cadpage.SmsMsgInfo.Data;
import net.anei.cadpage.parsers.dispatch.DispatchPrintrakParser;

/*
Orange County, NY (Variant B)
Contact: George Ewings <gewings@gmail.com>
Contact: Seth Armstrong <setharmstrong31@gmail.com>
Contact: Burton Struble <burton.struble@gmail.com>
Contact:  Dave Abbott <davea@a1-services.com>
Contact: kevin torres <nycff103@gmail.com>
Contact: Kevin Hagan <khagan7937@gmail.com>
Sender: oc911@co.orange.ny.us, OC911@ocinets01.orangecounty.local, oc911@ocmails02.orangecounty.local, oc911@orangecountygov.com

DEPTPB          TYP: MEDICAL ASSISTANCE AD: 1015 INDIAN SPRINGS RD CN: ULSTER 911 CMT1: REGISTRO RD AND REDDER RD / 67/M UPPER ABDOMIAL PAIN-ALS CALL / WALKER VA CMT2: LLEY FIRE DISTRICT TIME: 14:44
DEPTWK     TYP: MVA- UNKNOWN STATUS AD: ST RTE 17 W&EXIT 120 W OFF CTY: WALLKILL CN: RICHARD CMT1: CALLER REPORTS A 2 CAR MV
DEPTWK     TYP: FALLS APT: 621 AD: 121 DUNNING RD CTY: WALLKILL CN: MARGARET TENNISON CMT1: MVISITOR FELL IN PT ROOM ARM AND
DEPTWK     TYP: PSYCH EMERG BLD: 10 APT: 13B AD: 92 FITZGERALD DR CTY: WALLKILL CN: TRACZ, CAROLINE CMT1: "SEND AS AN ALPHA
DEPTWK     TYP: MVA WITH INJURIES AD: 637 ST RTE 211 W CTY: WALLKILL CN: PAULIE SMITH CMT1: CAR OFF ROADWAY UNK INJURIES TIM
DEPTWK     TYP: POISONING/OVERDOSE APT: 124 AD: 563 ST RTE 211 E CTY: WALLKILL CN: CARMINE AT THE DESK CMT1: MALE AUBJECT TR
DEPTPB     TYP: MEDICAL ASSISTANCE AD: ST RTE 302&BRUYN AVE CTY: CRAWFORD CMT1: Parent Inc F35110110000013 UPDATE PriUnt to
DEPTWK     TYP: ASSAULT AD: 470 ST RTE 211 E CTY: WALLKILL CN: HOPE TOTTEN CMT1: WAS PUNCHED IN THE BACK OF THE HEAD BY CUST
DEPTWK     TYP: TRAUMA APT: 312 AD: 455 SCHUTT ROAD EXT CTY: WALLKILL CN: CODY, MARY PRATT CMT1: "SEND AS AN ALPHA RESPONSE"
DEPTWK     TYP: MVA- UNKNOWN STATUS AD: 470 ST RTE 211 E CTY: WALLKILL CN: AMBER CMT1: 1 CAR INTO A POLE WITH AIRBAG DEPLOYM
DEPTWK     TYP: PSYCH EMERG- VIOLENT BLD: 1 APT: 1A AD: 35 SILVER LAKE SCOTCHTOWN RD CTY: WALLKILL CN: VON HON MEGGAN CMT1:
DEPTWK     TYP: MEDICAL ASSISTANCE AD: 601 E MAIN ST CTY: WALLKILL CN: SAMANTHA ORTIZ CMT1: INCIDENT CLONED FROM PARENT: LTW
DEPTPB     TYP: TRAUMA AD: 2 CHURCH ST CTY: CRAWFORD CN: KAYLA CMT1: MGIRL WAS HIT IN THE FACE NOSE BLEEDING 18 YEAR OLD FEM
DEPTWK     TYP: DIABETIC PROBLEMS APT: 309 AD: 455 SCHUTT ROAD EXT CTY: WALLKILL CN: BOSCO, JOAN CMT1: DIABETIC PROBLEMS 78
DEPTWK     TYP: MVA WITH INJURIES AD: ST RTE 211 E&EXIT 120 W OFF CTY: WALLKILL CN: MARGRET BUTLER JOHNS CMT1: 2 CAR NO WITH
DEPTPB     TYP: MEDICAL ASSISTANCE AD: 3105 ST RTE 52 CTY: ULSTER CN: ULSTER CMT1: 63 Y/O/M DIFF BREATHING/CHEST PAIN CMT2:
DEPTPB     TYP: MEDICAL ASSISTANCE AD: CO RTE 48&ST RTE 302 CTY: CRAWFORD CMT1: PT WITH RIB INJURIES / 2ND TO MVA/ USE EXTRE
DEPTWK     TYP: MEDICAL ASSISTANCE AD: 455 SCHUTT ROAD EXT CTY: WALLKILL CN: MOBILE LIFE CMT1: EVALUATION FROM MVA CMT2: Ori
DEPTWK     TYP: MVA- UNKNOWN STATUS AD: ST RTE 211 E&EXIT 120 E ON CTY: WALLKILL CN: ROSEALEE CMT1: 3 CAR MVA /// CALLER C/O
DEPTWK     TYP: LIFTING ASSISTANCE BLD: 10 APT: 13B AD: 92 FITZGERALD DR CTY: WALLKILL CN: TRACZ, CAROLINE CMT1: "SEND AS AN
DEPT13     TYP: MOTOR VEHICLE ACCIDT AD: 1166 US RTE 9W CTY: HIGHLANDS CN: MATTHREW CMT1: MOTORCYCLE DOWN AT THIS LOCATION TWO INJURIES.
DEPTNM    Â¿TYP: MEDICAL ASSISTANCE AD: 227 SUMMIT DR CTY: NEW WINDSOR CN: 173 CMT1: EDP TIME: 21:33 XST: 109 PARKDALE DR XST2: 43 ONA LN
DEPT38 TYP: WIRES DOWN/BURNING AD: 54 RESERVOIR AVE CTY: PORT JERVIS CN: PJ PD CMT1: WIRES DOWN AND BURNING TIME: 04:52 XST: 4 CEDAR ST XST2: SKYLINE DR
DEPTWK     TYP: FALLS AD: 12 JOHNS RD CTY: WALLKILL CN: NAMARA, DANIEL F MC CMT1: MFALL/ POSS BROKEN ANKLE 61 YEAR OLD FEMALE CONSCIOUS B
DEPT47     TYP: ODOR INVESTIGATION AD: OAKLAND CT&WELLING AVE CTY: WARWICK V CMT1: ODOR OF GAS TIME: 02:44\n\n\nThis message has been scanned for malware.
DEPT47     TYP: FIRE AD: ST RTE 94 S&OAKLAND AVE CTY: WARWICK CMT1: POLE ON FIRE TIME: 01:24\n\n\nThis message has been scanned for malware.
DEPT47     TYP: AUTOMATIC FIRE ALARM AD: 21 DARIN RD CTY: WARWICK CMT1: RESIDENTIAL AA AT THE JOHN GRATTAN FIRST FLOOR SMOKE// CMT2: THERE IS AN UNCONFINED DO
DEPT47     TYP: ANNOUNCEMENT AD: 25 CHURCH ST CTY: WARWICK V CN: ELMER BUDD CMT1: HAVE WARWICK DUTY CHIEF CALL GOSHEN 3 ASAP CMT2: Original Location : EXCELSI
DEPT47     TYP: ANNOUNCEMENT AD: 81 MAIN ST CTY: CHESTER V CN: BILL PETRICK CMT1: T917 IS BACK IN SERVICE AND RELEASE WARWICK WITH THEIR THANKS CMT2: Original

*/


public class NYOrangeCountyBParser extends DispatchPrintrakParser {
  
  private static final Properties CITY_TABLE = buildCodeTable(new String[]{
  });
  
  public NYOrangeCountyBParser() {
    super(CITY_TABLE, "ORANGE COUNTY", "NY");
  }
  
  @Override
  public String getFilter() {
    return "OC911@";
  }
  
  @Override
  public boolean parseMsg(String body, Data data) {
    int pt = body.indexOf('\n');
    if (pt >= 0) body = body.substring(0,pt).trim();
    body = cleanExtendedChars(body);
    if (!super.parseMsg(body, data)) return false;
    
    // Special handling for Ulster county calls
    if (data.strCity.length() == 0 && data.strName.equals("ULSTER 911")) {
      data.strCity = "ULSTER COUNTY";
    }
    
    // Drop village indicator
    if (data.strCity.endsWith(" V")) {
      data.strCity = data.strCity.substring(0, data.strCity.length()-2).trim();
    }
    return true;
  }
}
