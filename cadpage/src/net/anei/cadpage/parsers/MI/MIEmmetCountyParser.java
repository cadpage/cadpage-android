package net.anei.cadpage.parsers.MI;

import net.anei.cadpage.parsers.MsgInfo.Data;
import net.anei.cadpage.parsers.dispatch.DispatchOSSIParser;

/*
Emmet County, MI
CCE Central Dispatch also servers Charlevoix and Cheboygan Counties
Contact: Greg Clark <gclark@cce911.com>
System: Pagegate

CAD:Msg:FYI: ;PERSONAL INJURY ACCIDENT;RBFR;409 N DIVISION RD/SUMMIT PARK DR;2 VEH PI. ONE VEH INTO THE TREES  [07/24/12 11:46:46 KMATELSKI]<10><13><10>
CAD:Msg:FYI: ;MEDIC TRANSPORT;AEAM;416 CONNABLE AV;GOING TO CHEBOYGAN HOSPIC  [07/24/2012 11:57:20 KHEWITT]<10><13><10>
CAD:Msg:Update: ;AMBULANCE;EJAM;5632 RICHARDS RD;[Medical Priority Info] PROBLEM: HUSBAND FEELING FAINT 82YM   # PATS: 1   AGE: 82   SEX: Male   CONSCIOUS: Yes   BREATHING: Yes  [07/24/12 12:15:28 KMATELSKI]<10>[Medical Priority Info] RESPONSE: Ambula<13><10>
CAD:FYI: ;FIRE ASSIST OTHER AGENCY;RBFD;2499 RESORT PIKE RD/INTERTOWN RD;Event spawned from PROPERTY DAMAGE ACCIDENT.  [07/24/2012 13:51:20 VNOBLE]<10>SEMI TRUCK TIPPED OVER, NO OTHER VEHS ARE SEEN.  DRIVER APPEARS TO BE OUT WALKING AROUND. IT IS JUST THE TRAILER THAT TIPPED<13><10>
CAD:Msg:FYI: ;AMBULANCE;AEAM;450 BAY ST;INMATE CUT HIS LEFT ARM.  RESPOND TO THE SALLY PORT  [07/21/12 15:20:08 EMCKINLEY]<10><13><10>
CAD:Msg:FYI: ;FIRE ASSIST OTHER AGENCY;PEFD;450 BAY ST;Event spawned from AMBULANCE.  [07/21/2012 15:22:28 EMCKINLEY]<10>INMATE CUT HIS LEFT ARM.  RESPOND TO THE SALLY PORT  [07/21/12 15:20:08 EMCKINLEY]<10><13><10>
CAD:Msg:FYI: ;WATER ICE RESCUE;AEAM;6425 N LAKE SHORE DR;BROKEN CELL UNABLE TO HEAR CALLER WPH2  [07/21/12 16:07:38 BTACHE]<10>ON CB PHONE RANG AND WENT TO NON PERSONALIZED VM  [07/21/12 16:08:55 BTACHE]<10>15 YOM ON BEACH VOMITING AND HARD TIME BREATHING.  ONE<13><10>
CAD:Msg:Update: ;PERSONAL INJURY ACCIDENT;EMSH;1115 N US-31 HWY;STATES A MALE CAME IN ALL BLOODY AND HARDLY WALKING TOLD HER HE WAS HIT BY A DEER ON HIS BICYCLE, SHE ASKED IF SHE WANTED HIM TO CALL 911 FOR EMS AND HE SAID LET ME THINK ABOUT IT THEN HE WALKED OUT O<13><10>
CAD:Msg:FYI: ;ACCIDENT UNK INJURY;CCE;1399 LEARS RD/US-131 HWY;RP CALLING FROM WALMART.  REPORTING A 2 VEH ACCIDENT AT THE ABOVE INTERSECTION.  UNK FURTHER  [07/22/12 01:18:48 JBRECHT]<10><13><10>
CAD:Msg:FYI: ;VEHICLE FIRE;HSFD;5049 COOK AV/HEYDEY ST;FLAMES SHOWING. RP NOT INVOVLED, SAID THE PPL ARE TRYING TO GET THINGS OUT OF VEH INSTEAD OF GETTING AWAY  [07/22/12 11:25:38 BTACHE]<10><13><10>
CAD:Msg:FYI: ;BRUSH FIRE;CXFD;11550 SEQUANOTA HEIGHTS DR;STATES THERE ARE ASHES AND SMOKE COMING IN HER YARD UNK WHERE FROM BELIEVES ON SEQUANOTA HEIGHTS...NO BURNING PER DNR WEB SITE  [07/22/12 21:38:39 JLEE]<10><13><10>
CAD:Msg:FYI: ;AMBULANCE;BCAM;223 SILVER ST;[Medical Priority Info] PROBLEM: FEMALE WITH CHEST PAIN    # PATS: 1   AGE: 49   SEX: Female   CONSCIOUS: Yes   BREATHING: Yes  [07/23/12 09:15:45 KMATELSKI]<10><13><10>
3106:CAD:FYI: ;FIRE;CHFD;611 MACKINAW AV;SMOKE POURING OUT OF BACK OF NEIGHBOR`S RES KIDDY CORNER FROM RP`S. RP LIVES ON MACKINAW AV & NEIGHBOR IS ON DRESSER. RP DOE
3108:CAD:FYI: ;FIRE;BCFD;819 WILSON RD S;THERE IS A FIRE BEHIND HER WASHER & DRYER. [08/05/12 23:34:00 SBAVERY]
3115:CAD:FYI: ;FIRE;INFD;2140 MERIDIAN RD;THERE ARE FLAMES COMING OUT OF SHED AT THE PROPERTY ACROSS THE STREET FROM THE ABOVE ADDRESS [08/10/12 15:46:33 EMCKINLEY]

 */
public class MIEmmetCountyParser extends DispatchOSSIParser {
  
  public MIEmmetCountyParser() {
    this("EMMET COUNTY", "MI");
  }
  
  MIEmmetCountyParser(String defCity, String defState) {
    super(defCity, defState,
           "ID?:FYI CALL SRC! ADDR INFO+");
  }

  @Override
  protected boolean parseMsg(String body, Data data) {
    body = body.replace("CAD:MSG", "CAD:");
    return super.parseMsg(body, data);
  }
  
  @Override
  public Field getField(String name) {
    if (name.equals("SRC")) return new SourceField("[A-Z]{3,4}", true);
    return super.getField(name);
  }
}
