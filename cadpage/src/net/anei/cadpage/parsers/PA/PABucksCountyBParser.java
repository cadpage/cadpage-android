  package net.anei.cadpage.parsers.PA;

import java.util.regex.Matcher;
import java.util.regex.Pattern;

import net.anei.cadpage.parsers.MsgInfo.Data;

/*
Bucks County, PA
Contact: "Ryan Pankoe" <rpankoe@gmail.com>
Sender: mss@co.bucks.pa.us

 <SYSTEM GENERATED> TO INT1 FROM FS01  : 134/E60\n                                                    \n \n \n Inc History for: #ED1213417    Xref:                           #PD121040864\n\n \n Entered      04/13/12  15:57:01  BY PD10   753      \n Dispatched   04/13/12  15:57:23  BY FS01   619      \n \n Initial Type: ADIAB   Initial Alarm Level:  1  Final Alarm Level:  1\n Final Type: ADIAB (DIABETIC EMERGENCY) Pri: 3 Dspo:      Prem: [  ]\n EMS Blk:  134620 Fire Blk:  60063  Police Blk:  36106  Map Page: 3032G4 \n Group: EN  Beat: 134 Src:  N ATT:  MTC - Meet the Complainant  \n Loc: RT 309 OFFICE FURN ,36 at 1711 BETHLEHEM PK ,36 btwn SWARTLEY RD & MILL RD\n \n Loc Info: \n Name: DAN MCTAGUE             Addr:                         Phone: 2676406378\n \n/1557  (753     )  ENTRY:         63YOM,,AWAKE BUT INCOHERENT,,REFUSING THE SUGA\n                                  RS\n/1557  (619     )  DISP    A134    #125093   PANKOE,RYAN \n/1557              ADD     QUT60  
 <SYSTEM GENERATED> TO INT1 FROM FS01  : 134\n\n\n\n Inc History for: #ED1213447    Xref: #PD121041267\n\n Entered      04/13/12  21:10:06  BY PD06   576\n Dispatched   04/13/12  21:11:21  BY FS01   807\n\n Initial Type: BOD     Initial Alarm Level:  1  Final Alarm Level:  1\n Final Type: BOD   (OVERDOSE/POISIONING (NON CRIT)) Pri: 4 Dspo:\nPrem: [  ]\n EMS Blk:  134062 Fire Blk:  74062  Police Blk:  48101  Map Page: 3033E6\n Group: EN  Beat: 134 Src:   ATT:\n Loc: 214 HAMPSHIRE DR ,48  btwn CORNWALL DR & SURREY RD\n\n Loc Info:\n Name: SHANNON GILROY          Addr:                         Phone: 2679873669\n\n/2110  (576     )  COPY           ,FOR AN INTOX MALE\n/2110             $CROSS          #PD121041267\n                                  ,FOR AN INTOX MALE\n/2111  (807     )  DISP    A134    #125093   PANKOE,RYAN\n\n-- \n\n\nDISCLAIMER: This electronic message transmission has been sent by Chalfont Emergency Medical Services, Inc., which may contain confidential or privileged information. This information is intended for the individual or entity named above. If you are not the intended recipient, be aware that any disclosure, copying, distribution or use of the contents of this information is prohibited. If you have received this electronic transmission in error, please notify us immediately by telephone at 215-822-1308 x116, or by electronic mail (reply).
 <SYSTEM GENERATED> TO INT1 FROM FS01  : 125/134\n\n\n\n Inc History for: #ED1213623    Xref:                           #PD121060278\n\n Received     04/15/12  09:18:45  BY FD01   619\n Entered      04/15/12  09:19:25  BY FD01   619\n Dispatched   04/15/12  09:19:51  BY FS01   271\n\n Initial Type: ATRAN   Initial Alarm Level:  1  Final Alarm Level:  1\n Final Type: ATRAN (NON-SPECIFIC (CRITICAL) EMERG) Pri: 3 Dspo:      Prem: [  ]\n EMS Blk:  125003 Fire Blk:  19003  Police Blk:  29202  Map Page: 2922D10\n Group: EN  Beat: 125 Src:  9 ATT:\n Loc: 39 PINEVALE RD ,29  btwn PINE VALLEY RD S & PINE VALLEY RD N\n\n Loc Info:\n Name: KAREN RICHARDSON        Addr: DAUGHTER                Phone: 2153487812\n\n/0919  (619     )  ENTRY:         82YOF,,VERY WEAK,,UNABLE TO WALK\n/0919  (271     )  DISP    A134    #078910   MCDONAGH, PENELOPE\n                                  #131319   MEEHAN, JOSEPH (EMT)\n/0919              ADD     1253    #208306   WHITESIDE, JESSICA (EMT)\n                                  #100580   HARKER, KEVIN (EMT)\n\n\n\n--\n\n\nDISCLAIMER: This electronic message transmission has been sent by Chalfont\nEmergency Medical Services, Inc., which may contain confidential or\nprivileged information. This information is intended for the individual or\nentity named above. If you are not the intended recipient, be aware that\nany disclosure, copying, distribution or use of the contents of this\ninformation is prohibited. If you have received this electronic\ntransmission in error, please notify us immediately by telephone at\n215-822-1308\nx116, or by electronic mail (reply).
 <SYSTEM GENERATED> TO INT1 FROM FD02  : 134\n\n\n\n Inc History for: #ED1213579    Xref:                           #PD121051282\n\n Entered      04/14/12  23:49:37  BY PD06   741\n Dispatched   04/14/12  23:50:00  BY FD02   807\n\n Initial Type: BUNK    Initial Alarm Level:  1  Final Alarm Level:  1\n Final Type: BUNK  (UNKNOWN EMERGENCY (3RD PARTY)) Pri: 3 Dspo:      Prem: []\n EMS Blk:  134004 Fire Blk:  34005  Police Blk:  48201  Map Page: 2921F10\n Group: EN  Beat: 134 Src:   ATT:\n Loc: CALLOWHILL RD/NEW GALENA RD ,48\n\n Loc Info:\n Name:                         Addr:                         Phone:\n\n/2349  (741     )  COPY           ,OFC REQ BLS SQUAD DIDN'T SPECIFY WHAT\nFOR WHE\n                                 N ASKED\n/2349             $CROSS          #PD121051282\n                                 ,OFC REQ BLS SQUAD DIDN'T SPECIFY WHAT FOR\nWHE\n                                 N ASKED\n/2350  (807     )  DISP    A134    #078910   MCDONAGH, PENELOPE\n                                  #131319   MEEHAN, JOSEPH (EMT)\n\n\n\n--\n\n\nDISCLAIMER: This electronic message transmission has been sent by Chalfont\nEmergency Medical Services, Inc., which may contain confidential or\nprivileged information. This information is intended for the individual or\nentity named above. If you are not the intended recipient, be aware that\nany disclosure, copying, distribution or use of the contents of this\ninformation is prohibited. If you have received this electronic\ntransmission in error, please notify us immediately by telephone at\n215-822-1308\nx116, or by electronic mail (reply).
 <SYSTEM GENERATED> TO INT1 FROM FS01  : 151/134/E59\n\n\n\n Inc History for: #ED1213550    Xref:                           #PD121051005\n\n Received     04/14/12  19:03:19  BY CT10   830\n Entered      04/14/12  19:08:14  BY CT10   830\n Dispatched   04/14/12  19:10:06  BY FS01   488\n\n Initial Type: BTRAN   Initial Alarm Level:  1  Final Alarm Level:  1\n Final Type: BTRAN (EMERGENCY TRANSPORTATION) Pri: 4 Dspo:      Prem: [FW]\n EMS Blk:  152204 Fire Blk:  59004  Police Blk:  36118  Map Page: 2920E5\n Group: EN  Beat: 151 Src:  9 ATT:\n Loc: 1120 DIAMOND ST ,36  btwn NAROTHYN RD & E SCHOOLHOUSE RD\n\n Loc Info: LIFEPATH HOME\n Name: TAHALNY,JANET           Addr:                         Phone: 2152574233\n\n/1908  (830     )  ENTRY:         COMPL UNSURE OF TWP,,KEEPS GIVING SELLERSVILLE\n                                  AND CALLING THE BUISNESS LIFEPATH.....56/F,,B\n                                 P 112/78,,GENERAL WEAKNESS,,HX OF MENTAL RETAR\n                                 DATION\n/1909  (488     )  HOLD\n/1910              DISP    A134    #078910   MCDONAGH, PENELOPE\n                                  #131319   MEEHAN, JOSEPH (EMT)\n/1910              ADD     1512\n/1910              ADD     QUT59\n\n\n\n--\n\n\nDISCLAIMER: This electronic message transmission has been sent by Chalfont\nEmergency Medical Services, Inc., which may contain confidential or\nprivileged information. This information is intended for the individual or\nentity named above. If you are not the intended recipient, be aware that\nany disclosure, copying, distribution or use of the contents of this\ninformation is prohibited. If you have received this electronic\ntransmission in error, please notify us immediately by telephone at\n215-822-1308\nx116, or by electronic mail (reply).
 <SYSTEM GENERATED> TO INT1 FROM FS01  : 134\n                                                        \n\n\n Inc History for: #ED1215024    Xref:                           #PD121170060\n\n\n Received     04/26/12  02:16:24  BY CT08   809      \n Entered      04/26/12  02:17:25  BY CT08   809      \n Dispatched   04/26/12  02:17:38  BY FS01   613      \n\n Initial Type: BTRAN   Initial Alarm Level:  1  Final Alarm Level:  1\n Final Type: BTRAN (EMERGENCY TRANSPORTATION) Pri: 4 Dspo:      Prem: [  ]\n EMS Blk:  134001 Fire Blk:  34001  Police Blk:  48201  Map Page: 3033C2 \n Group: EN  Beat: 134 Src:  9 ATT:  MTC - Meet the Complainant  \n Loc: 17 WALDEN WY ,48  btwn CLOVER LA & CUL DE SAC\n\n Loc Info: \n Name: BUGGELN ROBERT W        Addr: 17 WALDEN WY            Phone: 2158229009\n\n/0217  (809     )  ENTRY:         95 YOF,, SEVERE RECTAL PAIN ,, PT IS NOT* ALON\n                                  E ,,\n/0217  (613     )  DISP    A134    #078910   MCDONAGH, PENELOPE \n                                   #131319   MEEHAN, JOSEPH (EMT) \n\n\n\n\n-- \n\n\nDISCLAIMER: This electronic message transmission has been sent by Chalfont Emergency Medical Services, Inc., which may contain confidential or privileged information. This information is intended for the individual or entity named above. If you are not the intended recipient, be aware that any disclosure, copying, distribution or use of the contents of this information is prohibited. If you have received this electronic transmission in error, please notify us immediately by telephone at 215-822-1308 x116, or by electronic mail (reply).
 <SYSTEM GENERATED> TO INT1 FROM FS01  : 134\n                                                        \n\n\n Inc History for: #ED1215020    Xref:                           #PD121161588\n\n\n Received     04/25/12  23:31:41  BY PD11   778      \n Entered      04/25/12  23:34:06  BY PD11   778      \n Dispatched   04/25/12  23:34:32  BY FS01   613      \n\n Initial Type: BPSYCH  Initial Alarm Level:  1  Final Alarm Level:  1\n Final Type: BPSYCH(PSYCHIATRIC EMERGENCY) Pri: 4 Dspo:      Prem: [  ]\n EMS Blk:  134030 Fire Blk:  34030  Police Blk:  48201  Map Page: 3033H1 \n Group: EN  Beat: 134 Src:  9 ATT:  MTC - Meet the Complainant  \n Loc: 209 E FAIRWOOD DR ,48  btwn BARBERRY CT & ASPEN CT\n\n Loc Info: \n Name: ROBERTSON,CARROLL       Addr:                         Phone:\n2157163337\n\n/2334  (778     )  ENTRY:         WIFE IS BEATING COMPL,, NRW,, COMPL HAS GUNS L\n                                  OCKED UP ATT,, NRI,, NO INTOX,, COMPL WANTS HE\n                                  R BROUGHT TO CRISIS BY EMS\n/2334  (613     )  DISP    A134    #078910   MCDONAGH, PENELOPE \n                                   #131319   MEEHAN, JOSEPH (EMT) \n\n\n\n\n-- \n\n\nDISCLAIMER: This electronic message transmission has been sent by Chalfont Emergency Medical Services, Inc., which may contain confidential or privileged information. This information is intended for the individual or entity named above. If you are not the intended recipient, be aware that any disclosure, copying, distribution or use of the contents of this information is prohibited. If you have received this electronic transmission in error, please notify us immediately by telephone at 215-822-1308 x116, or by electronic mail (reply).
 <SYSTEM GENERATED> TO INT1 FROM FS01  : 134\n                                                        \n\n\n Inc History for: #ED1215005    Xref:                           #PD121161461\n\n\n Received     04/25/12  21:00:42  BY CT10   810      \n Entered      04/25/12  21:02:16  BY CT10   810      \n Dispatched   04/25/12  21:02:43  BY FS01   613      \n\n Initial Type: ADIAB   Initial Alarm Level:  1  Final Alarm Level:  1\n Final Type: ADIAB (DIABETIC EMERGENCY) Pri: 3 Dspo:      Prem: [  ]\n EMS Blk:  134062 Fire Blk:  74062  Police Blk:  48101  Map Page: 3033F6 \n Group: EN  Beat: 134 Src:  9 ATT:  MTC - Meet the Complainant  \n Loc: 121 DOLLY LA ,48  btwn DOLLY CI & CORNWALL DR\n\n Loc Info: \n Name: EYRICH, SHIRLEY         Addr:                         Phone:\n2158220221\n\n/2102  (810     )  ENTRY:         TOOK WRONG DOSE OF INSULIN,, 75 YOF\n/2102              SUPP           TXT: NOT FEELING ANY SYMPTOMS ATT BUT WOULD LI\n                                  KE A SQUAD \n/2102  (613     )  DISP    A134    #078910   MCDONAGH, PENELOPE \n                                   #131319   MEEHAN, JOSEPH (EMT) \n\n\n\n\n-- \n\n\nDISCLAIMER: This electronic message transmission has been sent by Chalfont Emergency Medical Services, Inc., which may contain confidential or privileged information. This information is intended for the individual or entity named above. If you are not the intended recipient, be aware that any disclosure, copying, distribution or use of the contents of this information is prohibited. If you have received this electronic transmission in error, please notify us immediately by telephone at 215-822-1308 x116, or by electronic mail (reply).
 <SYSTEM GENERATED> TO INT1 FROM FS01  : 125/134\n                                                    \n\n\n Inc History for: #ED1215003    Xref:                           #PD121161443\n\n\n Received     04/25/12  20:53:50  BY CT12   825      \n Entered      04/25/12  20:54:23  BY CT12   825      \n Dispatched   04/25/12  20:55:24  BY FS01   613      \n\n Initial Type: ASEIZ   Initial Alarm Level:  1  Final Alarm Level:  1\n Final Type: ASEIZ (SEIZURE/ACTIVE (MEDIC)) Pri: 2 Dspo:      Prem: [  ]\n EMS Blk:  125006 Fire Blk:  19006  Police Blk:  47001  Map Page: 3034C2 \n Group: EN  Beat: 125 Src:  9 ATT:  MTC - Meet the Complainant  \n Loc: 20 CEDAR DR ,47  btwn E RT 202 & VINE ST\n\n Loc Info: \n Name: GLASCOTT, JAKE          Addr:                         Phone: 2154897294\n\n/2054  (825     )  ENTRY:         45/F,,ACTIVE SEIZURES\n/2055  (613     )  DISP    A134    #078910   MCDONAGH, PENELOPE \n                                   #131319   MEEHAN, JOSEPH (EMT) \n\n\n\n\n-- \n\n\nDISCLAIMER: This electronic message transmission has been sent by Chalfont Emergency Medical Services, Inc., which may contain confidential or privileged information. This information is intended for the individual or entity named above. If you are not the intended recipient, be aware that any disclosure, copying, distribution or use of the contents of this information is prohibited. If you have received this electronic transmission in error, please notify us immediately by telephone at 215-822-1308 x116, or by electronic mail (reply).
 <SYSTEM GENERATED> TO INT1 FROM FS01  : 339/134\n                                                    \n\n\n Inc History for: #ED1214986    Xref:                           #PD121161270\n\n\n Received     04/25/12  18:31:37  BY CT12   825      \n Entered      04/25/12  18:33:29  BY CT12   825      \n Dispatched   04/25/12  18:34:40  BY FS01   613      \n\n Initial Type: ATRAN   Initial Alarm Level:  1  Final Alarm Level:  1\n Final Type: ATRAN (NON-SPECIFIC (CRITICAL) EMERG) Pri: 3 Dspo:      Prem: [ ]\n EMS Blk:  339751 Fire Blk:  37501  Police Blk:  36117  Map Page: 2919K8 \n Group: EN  Beat: 339 Src:  9 ATT:  MTC - Meet the Complainant  \n Loc: 264 WASHINGTON PL ,36  btwn CONESTOGA WY & CUL DE SAC\n\n Loc Info: \n Name: HENSHAW,JOYCE           Addr: WIFE                    Phone: 2157210892\n\n/1833  (825     )  ENTRY:         68/M,,IN AND OUT ON CONCIOUSNESS,,COMPLAINING \n                                  OF PAIN IN HIS HANDS/LEGS,,PARKINSONS\nPATIENT,\n                                  ,REQ GVH AND NO LIGHTS/SIRENS\n/1834  (613     )  DISP    A134    #078910   MCDONAGH, PENELOPE \n                                   #131319   MEEHAN, JOSEPH (EMT) \n\n\n\n\n-- \n\n\nDISCLAIMER: This electronic message transmission has been sent by Chalfont Emergency Medical Services, Inc., which may contain confidential or privileged information. This information is intended for the individual or entity named above. If you are not the intended recipient, be aware that any disclosure, copying, distribution or use of the contents of this information is prohibited. If you have received this electronic transmission in error, please notify us immediately by telephone at 215-822-1308 x116, or by electronic mail (reply).
 <SYSTEM GENERATED> TO INT1 FROM FS01  : 134\n                                                        \n\n\n Inc History for: #ED1214883    Xref:                           #PD121151236\n\n\n Entered      04/24/12  20:54:23  BY EMS1   753      \n Dispatched   04/24/12  20:54:54  BY FS01   807      \n\n Initial Type: BFALL   Initial Alarm Level:  1  Final Alarm Level:  1\n Final Type: BFALL (FALL VICTIM (NON-CRITICAL)) Pri: 4 Dspo:      Prem: [  ]\n EMS Blk:  134029 Fire Blk:  34029  Police Blk:  27001  Map Page: 3033G4 \n Group: EN  Beat: 134 Src:  N ATT:  MTC - Meet the Complainant  \n Loc: PINE CREEK CONDOS #D53 ,27 at 26 PARK AV #D53 ,27 btwn CHESTNUT ST & PINE CREEK CONDOS\n\n Loc Info: \n Name: MARY GRAZIANO           Addr:                         Phone: 2678974536\n\n/2054  (753     )  ENTRY:         MALE HAS FALLEN,,POSS SINCE THIS MORNING,,PT I\n                                  S YELLING,,DOOR IS LOCKED,, COMPL KICKED DOOR \n                                  IN\n/2054  (807     )  DISP    A134    #131431   HENLEY, SCOTT \n\n\n\n\n-- \n\n\nDISCLAIMER: This electronic message transmission has been sent by Chalfont Emergency Medical Services, Inc., which may contain confidential or privileged information. This information is intended for the individual or entity named above. If you are not the intended recipient, be aware that any disclosure, copying, distribution or use of the contents of this information is prohibited. If you have received this electronic transmission in error, please notify us immediately by telephone at 215-822-1308 x116, or by electronic mail (reply).
 <SYSTEM GENERATED> TO INT1 FROM FS01  : 134/E60\n                                                    \n\n\n Inc History for: #ED1214856    Xref:                           #PD121150873\n\n\n Received     04/24/12  16:18:31  BY CT06   794      \n Entered      04/24/12  16:19:27  BY CT06   794      \n Dispatched   04/24/12  16:19:48  BY FS01   619      \n\n Initial Type: ARESP   Initial Alarm Level:  1  Final Alarm Level:  1\n Final Type: ARESP (RESPIRATORY DISTRESS) Pri: 2 Dspo:      Prem: [PW]\n EMS Blk:  134620 Fire Blk:  60063  Police Blk:  36106  Map Page: 3032E3 \n Group: EN  Beat: 134 Src:  9 ATT:  MTC - Meet the Complainant  \n Loc: 2343 BETHLEHEM PK ,36 -- DOCK MEADOWS NH btwn UNIONVILLE PK & CHURCH RD\n\n Loc Info: CHURCH ROAD ENTRANCE\n Name: SUE                     Addr: NURSE-RN                Phone: 2158220688\n\n/1619  (794     )  ENTRY:         80 YOM,,SOB,,HIGH TEMP,,\n/1618?             SUPP           LOC: 2343 BETHLEHEM PK #107 ,36, \n                                  LOCI: CHURCH ROAD ENTRANCE, \n                                  TXT: 80 YOM,,SOB,,HIGH TEMP,, \n/1619  (619     )  DISP    A134    #160645   BRUNK, RYAN \n/1619              ADD     QUT60  \n\n\n\n\n-- \n\n\nDISCLAIMER: This electronic message transmission has been sent by Chalfont Emergency Medical Services, Inc., which may contain confidential or privileged information. This information is intended for the individual or entity named above. If you are not the intended recipient, be aware that any disclosure, copying, distribution or use of the contents of this information is prohibited. If you have received this electronic transmission in error, please notify us immediately by telephone at 215-822-1308 x116, or by electronic mail (reply).
 <SYSTEM GENERATED> TO INT1 FROM FS01  : 134/124\n                                                    \n\n\n Inc History for: #ED1214833    Xref:                           #PD121150498\n\n\n Entered      04/24/12  11:35:44  BY CT07   578      \n Dispatched   04/24/12  11:36:25  BY FS01   619      \n\n Initial Type: ACVA    Initial Alarm Level:  1  Final Alarm Level:  1\n Final Type: ACVA  (CVA/STROKE) Pri: 3 Dspo:      Prem: [  ]\n EMS Blk:  123017 Fire Blk:  23018  Police Blk:  36099  Map Page: 2921H5 \n Group: EN  Beat: 134 Src:  N ATT:    \n Loc: TABORA ORCHARDS ,36 at 1104 UPPER STUMP RD ,36 btwn UPPER CHURCH RD &\nOLD LIMEKILN RD\n\n Loc Info: ITA\n Name: PAUL STILMAN            Addr:                         Phone:\n2155343199\n\n/1135  (578     )  ENTRY:         46 YR OLD MALE\n/1136              SUPP           LOCI: ITA IN A GRAVEL PKLOT ON A SWING, \n                                  TXT: 46 YR OLD MALE HAVING A STROKE \n/1136  (619     )  DISP    A124    #062940   MCGINTY,JOE \n\n\n\n\n-- \n\n\nDISCLAIMER: This electronic message transmission has been sent by Chalfont Emergency Medical Services, Inc., which may contain confidential or privileged information. This information is intended for the individual or entity named above. If you are not the intended recipient, be aware that any disclosure, copying, distribution or use of the contents of this information is prohibited. If you have received this electronic transmission in error, please notify us immediately by telephone at 215-822-1308 x116, or by electronic mail (reply).
 <SYSTEM GENERATED> TO INT1 FROM FS01  : 134\n                                                        \n\n\n Inc History for: #ED1214511    Xref:                           #PD121120819\n\n\n Received     04/21/12  15:47:06  BY CT11   749      \n Entered      04/21/12  15:50:06  BY CT11   749      \n Dispatched   04/21/12  15:50:45  BY FS01   764      \n\n Initial Type: ARESP   Initial Alarm Level:  1  Final Alarm Level:  1\n Final Type: ARESP (RESPIRATORY DISTRESS) Pri: 2 Dspo:      Prem: [  ]\n EMS Blk:  134036 Fire Blk:  34036  Police Blk:  47001  Map Page: 3033K3 \n Group: EN  Beat: 134 Src:  9 ATT:  MTC - Meet the Complainant  \n Loc: W BUTLER AV/SAND RD ,47   \n\n Loc Info: BY BUXMONT PARTY RENTALS\n Name: T MOBILE, USA           Addr: MICHAEL SCHMID          Phone: 2153533596\n\n/1550  (749     )  ENTRY:         +040.318568 -075.211243,,25 YOM,,CALLER IS PT.\n                                  ..ON FOOT ...NOW SITTING ON CURB...CAN'T CATCH\n                                   BREATH...HAS ADDICTION TO INHALLENTS\n/1550  (764     )  DISP    A134    #160645   BRUNK, RYAN \n\n\n\n\n-- \n\n\nDISCLAIMER: This electronic message transmission has been sent by Chalfont Emergency Medical Services, Inc., which may contain confidential or privileged information. This information is intended for the individual or entity named above. If you are not the intended recipient, be aware that any disclosure, copying, distribution or use of the contents of this information is prohibited. If you have received this electronic transmission in error, please notify us immediately by telephone at 215-822-1308 x116, or by electronic mail (reply).
 <SYSTEM GENERATED> TO INT1 FROM FS01  : /134\n                                                    \n\n\n Inc History for: #ED1214497\n\n\n Entered      04/21/12  13:09:26  BY FD01   341      \n Dispatched   04/21/12  13:10:58  BY FS01   764      \n\n Initial Type: AUNC    Initial Alarm Level:  1  Final Alarm Level:  1\n Final Type: AUNC  (UNCONSCIOUS PERSON) Pri: 1 Dspo:      Prem: [  ]\n EMS Blk:   Fire Blk:   Police Blk:   Map Page:  \n Group: EX  Beat:  Src:  N ATT:    \n Loc: 721 CYPRESS CT MONTGOMERY TWP  \n\n Loc Info: XSTS STREAMVIEW DR\n Name: MONTCO                  Addr:                         Phone: INTERCOM\n\n\n/1309  (341     )  ENTRY:         A134 COVER SQ345A, 93 YOM, UNC AND CLAMMY\n/1310  (764     )  DISP    A134    #160645   BRUNK, RYAN \n                                  ,IN THE NESHAMINY FALLS DEVELOPMENT\n\n\n\n\n-- \n\n\nDISCLAIMER: This electronic message transmission has been sent by Chalfont Emergency Medical Services, Inc., which may contain confidential or privileged information. This information is intended for the individual or entity named above. If you are not the intended recipient, be aware that any disclosure, copying, distribution or use of the contents of this information is prohibited. If you have received this electronic transmission in error, please notify us immediately by telephone at 215-822-1308 x116, or by electronic mail (reply).
[911 Data]  <SYSTEM GENERATED> TO INT1 FROM FS01  : \n134\n                                                        \n Inc History for: #ED1215452    Xref:                           #PD121200569 \n Entered      04/29/12  14:13:01  BY CT06   815      \n Dispatched   04/29/12  14:13:56  BY FS01   271      \n Initial Type: BTAI    Initial Alarm Level:  1  Final Alarm Level:  1\n Final Type: BTAI  (TRAFFIC ACCIDENT(NON-CRITICAL)) Pri: 3 Dspo:      Prem: [  ]\n EMS Blk:  134055 Fire Blk:  74055  Police Blk:  48101  Map Page: 3033D7 \n Group: EN  Beat: 134 Src:  N ATT:    \n Loc: 560 W BUTLER AV ,48  btwn SCHOOL HOUSE RD & COUNTY LINE RD\n Loc Info: \n Name: AGERO MONITORING CTR    Addr: 3RD PARTY               Phone:           \n/1413  (815     )  ENTRY:         NRI,,BLOCKING,,2 VEHS,,2 CHILDREN IN VEHS PARE\n                                  NT WANT THEM CHECKED OUT\n/1413  (271     )  DISP    A134    #078910   MCDONAGH, PENELOPE \n                                   #095422   HUTTENLOCK, SCOTT (EMT) \n-- \nDISCLAIMER: This electronic message transmission has been sent by Chalfont Emergency Medical Services, Inc., which may contain confidential or privileged information. This information is intended for the individual or entity named above. If you are not the intended recipient, be aware that any disclosure, copying, distribution or use of the contents of this information is prohibited. If you have received this electronic transmission in error, please notify us immediately by telephone at 215-822-1308 x116, or by electronic mail (reply).\n

 */


public class PABucksCountyBParser extends PABucksCountyBaseParser {
  
  public PABucksCountyBParser() {
    super(null);
  }
  
  @Override
  public String getFilter() {
    return "8276,@bnn.us,iamresponding.com,Bucks RSAN,@alert.bucksema.org";
  }
  
  private static final Pattern ID_PTN = Pattern.compile("\n *Inc History for: #(ED\\d+)\\b");
  private static final Pattern DATE_TIME_PTN = Pattern.compile("\n *Dispatched  +(\\d\\d/\\d\\d/\\d\\d) +(\\d\\d:\\d\\d:\\d\\d) +");
  private static final Pattern CALL_PTN = Pattern.compile("\n *Final Type: (.*?) Pri:");
  private static final Pattern BOX_MAP_PTN = Pattern.compile("\n *EMS Blk: +(\\d*) +Fire Blk: +(\\d*) +Police Blk: +\\d* +Map Page: *([A-Z0-9]*) *(?=\r?\n)");
  private static final Pattern ADDR_PTN = Pattern.compile("\n *Loc: *(.*?) *(?=\r?\n)");
  private static final Pattern PLACE_NAME_PHONE_PTN = Pattern.compile("\n *Loc Info: *(.*?)\r?\n *Name: +(.*?) +Addr: +.*? +Phone: *(.*?) *\r?\n");
  private static final Pattern NEXT_LINE_PTN = Pattern.compile("(.*?)(?:(\r?\n)|$)");
  
  private static final Pattern ENTRY_MARK_PTN = Pattern.compile("^/\\d++\\?? ");
  private static final Pattern CONT_MARK_PTN = Pattern.compile("^ {30}"); 
  
  @Override
  protected boolean parseMsg(String body, Data data) {
    Parser p = new Parser(body);
    
    Matcher match = p.getMatcher(ID_PTN);
    if (match == null) return false;
    data.strCallId = match.group(1);
    
    match = p.getMatcher(DATE_TIME_PTN);
    if (match == null) return false;
    data.strDate = match.group(1);
    data.strTime = match.group(2);
    
    match = p.getMatcher(CALL_PTN);
    if (match == null) return false;
    data.strCall = match.group(1).trim();
    
    match = p.getMatcher(BOX_MAP_PTN);
    if (match == null) return false;
    String fireBox = match.group(2);
    if (fireBox.length() > 0) fireBox = "F:" + fireBox;
    String emsBox = match.group(1);
    if (emsBox.length() > 0) emsBox = "E:" + emsBox;
    data.strBox = append(fireBox, " ", emsBox);
    data.strMap = match.group(3);
    
    match = p.getMatcher(ADDR_PTN);
    if (match == null) return false;
    parseAddress(match.group(1).trim(), data);
    
    match = p.getMatcher(PLACE_NAME_PHONE_PTN);
    if (match == null) return false;
    data.strPlace = append(data.strPlace, " - ", match.group(1).trim());
    data.strName = match.group(2).trim();
    data.strPhone = match.group(3).trim();
    
    boolean entry = false;
    while (true) {
      match = p.getMatcher(NEXT_LINE_PTN);
      if (match == null) break;
      String line = match.group(1);
      if (line.trim().length() == 0) continue;
      if (line.length() < 27) break;
      if (ENTRY_MARK_PTN.matcher(line).find()) {
        String type = line.substring(19,25).trim();
        entry = type.equals("ENTRY:") || type.equals("COPY") || type.equals("SUPP");
        if (entry && line.length() > 33) {
          data.strSupp = append(data.strSupp, "\n", line.substring(33).trim());
        }
        else if (type.equals("DISP") || type.equals("ADD")) {
          data.strUnit = append(data.strUnit, " ", substring(line,27,33).trim());
        }
      }
      else if (CONT_MARK_PTN.matcher(line).find()) {
        if (entry && line.length() > 33) {
          data.strSupp = append(data.strSupp, " ", line.substring(33).trim());
        }
      }
      else break;
      if (match.group(2) == null) break;
    }
    
    return true;
  }
}
